project_name: gotham

builds:
  - dir: src
    env:
      - CC=o64-clang
      - CXX=o64-clang++
    goos:
      - darwin
    goarch:
      - amd64
    ldflags:
      - -s -w -X github.com/gothamhq/gotham/common/hugo.buildDate={{.Date}} -X github.com/gothamhq/gotham/common/hugo.commitHash={{ .ShortCommit }}
  #-
  #  id: windows
  #  env:
  #    - CC=x86_64-w64-mingw32-gcc
  #    - CXX=x86_64-w64-mingw32-g++
  #  flags:
  #    - -tags
  #    - extended
  #  goos:
  #    - windows
  #  goarch:
  #    - amd64
  #  ldflags:
  #    - -s -w -X github.com/gothamhq/gotham/common/hugo.buildDate={{.Date}} -X github.com/gothamhq/gotham/common/hugo.commitHash={{ .ShortCommit }}
  #    - "-extldflags '-static'"

archives:
  -
    builds:
      - linux
      #- macos
      #- windows
    format: tar.gz
    format_overrides:
      - goos: windows
        format: zip
    name_template: "{{.ProjectName}}_{{.Version}}_{{.Os}}-{{.Arch}}{{ if .Arm }}v{{ .Arm }}{{ end }}"
    replacements:
      darwin: macos
    files:
      - README.md
      - LICENSE

nfpms:
  -
    builds:
      - linux
    formats:
        - deb
    vendor: "GothamHQ"
    homepage: "https://GothamHQ.com"
    maintainer: "GothamHQ Team <Team@GothamHQ.com>"
    description: "An awesome static site generator."
    license: "Apache 2.0"
    file_name_template: "{{.ProjectName}}_{{.Version}}_{{.Os}}-{{.Arch}}{{ if .Arm }}v{{ .Arm }}{{ end }}"
    replacements:
      darwin: macos
